﻿@{
    Layout = "~/Views/Shared/_AdminLayout.cshtml";

}
@model GetCar_Plane_Train;
<!--This View Allow Administrator to create a new mean of transport-->
<div class="row">
    <div class="col-md-3"></div>
    <div class="col-md-6">
        <div class="ibox">
            <div class="ibox-head">
                <h3 class="ibox-title">Creating new Transportation</h3>
            </div>
            <div class="ibox-body">
                <form id="frmData" action="/admin/CreateAdminTransport" method="post" enctype="multipart/form-data">
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label>
                                Transport Name <span class="text-muted" style="font-size:10px">
                                    - This shows the name of your transportation
                                </span>
                            </label>
                            <input type="text" class="form-control" name="Name">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label>
                                Estimation Price <span class="text-muted" style="font-size:10px">
                                    - This shows the Estimation Price of your trip (per route).
                                </span>
                            </label>
                            <input type="number" class="form-control" name="Price">
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-4">
                            <label>Departure <span class="text-muted" style="font-size:10px">- Select departure spot</span></label>
                            <select class="form-control" name="spot">
                                @foreach (var item in Model.Spots)
                                {
                                    <option value="@item.Id">@item.Id - @item.Name</option>
                                }
                            </select>
                        </div>
                        <div class="form-group col-md-4">
                            <label>Arrival <span class="text-muted" style="font-size:10px">- Select arrival spot</span></label>
                            <select class="form-control" name="spot1">
                                @foreach (var item in Model.Spots)
                                {
                                    <option value="@item.Id">@item.Id - @item.Name</option>
                                }
                            </select>
                        </div>
                        <div class="form-group col-md-4">
                            <label>Type <span class="text-muted" style="font-size:10px">- Select type of transport </span></label>
                            <select class="form-control" name="Tran">
                                @foreach (var item in Model.Transportations)
                                {
                                    <option value="@item.CatId">@item.CatId - @item.CatName</option>
                                }
                            </select>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-10">
                            <input class="form-control" type="file" name="FileImg" multiple>
                        </div>
                        <div class="form-group col-md-2">
                            Active @Html.CheckBoxFor(Model => Model.Active)
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group col-md-12">
                            <label>Description</label>
                            <textarea id="editor" asp-for="@Model.travel.Description" class="form-control"></textarea>
                            <input type="hidden" name="mydata" id="mydata" value="" />
                        </div>
                    </div>

                    <div class="row">
                        <div class="form-group col-md-12">
                            <button name="btnSave" id="btnSave" class="btn btn-success" type="submit">Submit</button>
                            <a asp-action="AdminTransportView" class="btn btn-danger" asp-controller="Admin">Go Back</a>
                        </div>
                    </div>

                </form>
            </div>
            <script src="~/ckeditor/ckeditor.js" type="text/javascript"></script>
            <!--Script Section for rendering data-->
            @section scripts {

                <script>
                    CKEDITOR.replace('editor');
                    //window.onload = function () {

                    //};
                    $(document).ready(function (e) {

                        $("#btnSave").click(function (e) {
                            e.preventDefault();
                            var dt = CKEDITOR.instances['editor'].getData();
                            $("#mydata").val(dt);
                            $("#frmData").submit();
                        });
                    });
                    var pathImg = "";
                    window.onload = () => {
                        var lsImage = document.querySelectorAll(".pic-rect>img");

                        for (i = 0; i < lsImage.length; i++) {
                            lsImage[i].onclick = (event) => {
                                var current_img = event.target;
                                pathImg = current_img.src;
                            }
                        }
                        setInterval(() => {
                            var q = document.querySelector("#cke_103_textInput");
                            if (q != null) {
                                if (q.value == "") {
                                    q.value = pathImg;
                                    pathImg = "";
                                }

                            }
                        }, 100);
                    }
                </script>
            }
            <!--End of script section-->
        </div>
    </div>
    <div class="col-md-3"></div>
</div>
<!--This View Allow Administrator to create a new mean of transport-->